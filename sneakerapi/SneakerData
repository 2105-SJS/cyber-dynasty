const SneaksAPI = require('sneaks-api');
const sneaks = new SneaksAPI();
const {createProduct} = require("../db")

const brands = ["jordan", "nike", "adidas", "crocs"]

brands.forEach( async (brand, idx) => {
    console.log("----", brand, "----")
    await sneaks.getProducts(brand, 50, function(err, products){


        products.forEach((product, idx) => {
    
            // let brand = (product.brand)
            console.log(idx, product.shoeName)
            console.log(product.brand)
            console.log(product.thumbnail)
            console.log(product.releaseDate)
            console.log(product.description)
            // (product.brand)(brand)
    
    
            // await makeProduct({brand, shoeName, brand, thumbnail, releaseDate, description}) 
            })
        })
}) 

const newProducts = async () => {

    await brands.forEach( async (brand, idx) => {
        console.log("----", brand, "----")
        await sneaks.getProducts(brand, 50, function(err, products){
    
    
            await products.forEach((product, idx) => {
        
                // let brand = (product.brand)
                console.log(idx, product.shoeName)
                console.log(product.brand)
                console.log(product.thumbnail)
                console.log(product.releaseDate)
                console.log(product.description)
                // (product.brand)(brand)
                
                const inventory = 5
                const brand = product.brand
                const colorway = product.colorway
                const shoeName = product.shoeName
                const releaseDate = product.releaseDate
                const retailPrice = product.resellPrice
                const inStock = true
                const thumbnail = product.thumbnail
                const resellPrice = $5000 
                await createProduct({
                    inventory, brand, colorway, shoeName, releaseDate, retailPrice, inStock, thumbnail, resellPrice
                })
                // await makeProduct({brand, shoeName, brand, thumbnail, releaseDate, description}) 
                })
            })
    }) 

}

module.exports = { newProducts }